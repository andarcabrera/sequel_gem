#!/usr/bin/env ruby

require 'Open3'
require 'sequel'

cmd = "psql --list | grep ttt_db_anda"

Open3.popen3(cmd) do |stdin, stdout, stderr, wait_thr|
  if stdout.read.match(/ttt_db_anda/).nil?
    system('createdb ttt_db_anda')

    Sequel.connect(:adapter=>'postgres', :host=>'localhost', :database=>'ttt_db_anda') {|db|

    db.create_table :games do
      primary_key :id
      String :board
    end
  }

  end
end